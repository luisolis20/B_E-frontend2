<template>
  <!-- Main Post Section Start-->
  <div class="container-fluid py-3">
    <div class="container-fluid py-3">
      <div class="row g-4">
        <div class="col-lg-7 col-xl-8 mt-0">
          <div class="position-relative overflow-hidden rounded">
            <img src="@/assets/img/news-7.jpg" class="img-fluid rounded img-zoomin w-100" alt="">
            <div class="d-flex justify-content-center px-4 position-absolute flex-wrap" style="bottom: 10px; left: 0;">
              <a href="#" class="text-white me-3 link-hover"><i class="fa fa-clock"></i> 06 minute read</a>
              <a href="#" class="text-white me-3 link-hover"><i class="fa fa-eye"></i> 23 Views</a>
              <a href="#" class="text-white me-3 link-hover"><i class="fa fa-comment-dots"></i> 05 Comment</a>
              <a href="#" class="text-white link-hover"><i class="fa fa-arrow-up"></i> 1.5k Share</a>
            </div>
          </div>
          <div class="border-bottom py-3">
            <a href="https://www.utelvt.edu.ec/site/2024/09/02/la-universidad-tecnica-luis-vargas-torres-de-esmeraldas-presentara-su-bolsa-de-empleo-en-el-iii-encuentro-de-graduados-as/" target="_blank"
              class="display-4 text-dark mb-0 link-hover">La Universidad Técnica “Luis Vargas Torres” de Esmeraldas presentará su Bolsa de Empleo en el III Encuentro de Graduados/as</a>
          </div>
          <p class="mt-3 mb-4 text-dark">La búsqueda de empleo no está exenta de dificultades, y desde la Universidad Técnica “Luis Vargas Torres” de 
          Esmeraldas se pretende facilitar a sus egresados y egresadas el acceso al mundo laboral. Por ello se ha creado una Bolsa de Empleo 
          que será presentada en el III Encuentro de Graduados y Graduadas que tendrá lugar el 20 de septiembre. Un evento en el que se explicará 
          el funcionamiento de esta iniciativa y se contará con responsables de importantes empresas e instituciones....
          </p>
          <div class="bg-white p-4 rounded">
            <div class="news-2">
              <h3 class="mb-4">----</h3>
            </div>
            <div class="row g-4 align-items-center">
              <div class="col-md-6">
                <div class="rounded overflow-hidden">
                  <img src="@/assets/img/news-2.jpg" class="img-fluid rounded img-zoomin w-100" alt="">
                </div>
              </div>
              <div class="col-md-6">
                <div class="d-flex flex-column">
                  <a href="https://www.utelvt.edu.ec/site/2024/09/11/directivos-del-area-de-evaluacion-y-aseguramiento-de-la-calidad-de-la-utlvte-participan-en-foro-organizado-por-la-asesec/" target="_blank" class="h3 link-hover">Directivos del área de Evaluación y Aseguramiento de la Calidad de la UTLVTE participan en foro organizado por la ASESEC.</a>
                  
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-lg-5 col-xl-4">
          <div class="bg-white rounded p-4 pt-0">
            <div class="row g-4">
              <div class="col-12">
                <div class="rounded overflow-hidden">
                  <img src="@/assets/img/news-3.jpg" class="img-fluid rounded img-zoomin w-100" alt="">
                </div>
              </div>
              <div class="col-12">
                <div class="d-flex flex-column">
                  <a href="https://www.utelvt.edu.ec/site/2024/09/11/inauguracion-de-sala-de-control-y-vigilancia-refuerza-la-seguridad-en-la-utlvte/"
                    target="_blank" class="h4 mb-2 link-hover">Inauguración de Sala de Control y Vigilancia Refuerza la Seguridad en la UTLVTE</a>
                  
                </div>
              </div>
              <div class="col-12">
                <div class="row g-4 align-items-center">
                  <div class="col-5">
                    <div class="overflow-hidden rounded">
                      <img src="@/assets/img/news-4.jpg" class="img-zoomin img-fluid rounded w-100" alt="">
                    </div>
                  </div>
                  <div class="col-7">
                    <div class="features-content d-flex flex-column">
                      <a href="https://www.utelvt.edu.ec/site/2024/09/10/se-inaugura-sala-de-lectura-infantil-en-la-biblioteca-universitaria/"
                        target="_blank" class="h6 link-hover">Se inaugura Sala de lectura infantil en la Biblioteca Universitaria</a>
                      
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-12">
                <div class="row g-4 align-items-center">
                  <div class="col-5">
                    <div class="overflow-hidden rounded">
                      <img src="@/assets/img/news-5.jpg" class="img-zoomin img-fluid rounded w-100" alt="">
                    </div>
                  </div>
                  <div class="col-7">
                    <div class="features-content d-flex flex-column">
                      <a href="https://www.utelvt.edu.ec/site/2024/08/01/bienestar-universitario-trabaja-en-proyecto-campus-verde/"
                        target="_blank" class="h6 link-hover">BIENESTAR UNIVERSITARIO TRABAJA EN PROGRAMA CAMPUS VERDE</a>
                     
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-12">
                <div class="row g-4 align-items-center">
                  <div class="col-5">
                    <div class="overflow-hidden rounded">
                      <img src="@/assets/img/news-6.jpg" class="img-zoomin img-fluid rounded w-100" alt="">
                    </div>
                  </div>
                  <div class="col-7">
                    <div class="features-content d-flex flex-column">
                      <a href="https://www.utelvt.edu.ec/site/2024/09/02/representacion-estudiantil-distingue-a-60-lideres-universitarios-con-importante-reconocimiento/"
                        target="_blank" class="h6 link-hover">Representación estudiantil distingue a 60 líderes universitarios con importante reconocimiento</a>
                      
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-12">
                <div class="row g-4 align-items-center">
                  <div class="col-5">
                    <div class="overflow-hidden rounded">
                      <img src="@/assets/img/news-1.jpg" class="img-zoomin img-fluid rounded w-100" alt="">
                    </div>
                  </div>
                  <div class="col-7">
                    <div class="features-content d-flex flex-column">
                      <a href="https://www.utelvt.edu.ec/site/2024/09/12/utlvte-propicia-espacios-de-innovacion-tecnologica-con-el-infoday-cedia/"
                        target="_blank" class="h6 link-hover">UTLVTE propicia espacios de innovación tecnológica con el Infoday CEDIA.</a>
                      
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-12">
                <div class="row g-4 align-items-center">
                  <div class="col-5">
                    <div class="overflow-hidden rounded">
                      <img src="@/assets/img/news-8.jpg" class="img-zoomin img-fluid rounded w-100" alt="">
                    </div>
                  </div>
                  <div class="col-7">
                    <div class="features-content d-flex flex-column">
                      <a href="https://www.utelvt.edu.ec/site/2024/08/28/directivos-de-la-utlvte-participan-en-la-capacitacion-fortalecimiento-de-las-finanzas-de-las-ies/"
                        target="_blank" class="h6 link-hover">Directivos de la UTLVTE participan en la capacitación «Fortalecimiento de las Finanzas de las IES».</a>
                      
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-12">
                <div class="row g-4 align-items-center">
                  <div class="col-5">
                    <div class="overflow-hidden rounded">
                      <img src="@/assets/img/news-9.jpg" class="img-zoomin img-fluid rounded w-100" alt="">
                    </div>
                  </div>
                  <div class="col-7">
                    <div class="features-content d-flex flex-column">
                      <a href="https://www.utelvt.edu.ec/site/2024/08/22/el-cronograma-de-titulacion-fue-analizada-en-importante-reunion/"
                        target="_blank" class="h6 link-hover">El Cronograma de Titulación fue analizada en importante reunión.</a>
                      
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="container-fluid vesitable py-5">
    <div class="container-fluid py-5" v-if="mostrarOpciones2">
      <h1 class="mb-0 display-1">Ofertas Más Recientes</h1><br><br>

      <form class="container-fluid row g-1 mt-1">
        <div class="row">
          <div class="col-lg-12">
            <div class="col-sm-6 col-md-6 col-xl-5">
              <label class="text-dark" for="">Filtrar Ofertas Por:</label><br>
              
            </div>
            <div class="col-sm-6 col-md-6 col-xl-5">
              <div class="input-group-icon">
                <select v-model="categoriaSeleccionada" class="form-select form-voyage-select input-box text-dark"
                  id="inputPersonOne">
                  <option value="" selected>
                    Categorías / Área
                  </option>
                  <option value="Administración y RRHH">Administración y RRHH</option>
                  <option value="Arquitectura y Producción">Arquitectura y Producción</option>
                  <option value="Comercial">Comercial</option>
                  <option value="Comercial, Negocios y Atención al público">Comercial, Negocios y Atención al público
                  </option>
                  <option value="Educación y Docencia">Educación y Docencia</option>
                  <option value="Hotelería, Gastronomía y Turismo">Hotelería, Gastronomía y Turismo</option>
                  <option value="Ingenierías">Ingenierías</option>
                  <option value="Logística y Abastecimiento">Logística y Abastecimiento</option>
                  <option value="Marketing, Publicidad, Comunicación y Diseño">Marketing, Publicidad, Comunicación y Diseño
                  </option>
                  <option value="Oficios">Oficios</option>
                  <option value="Producción y Operarios">Producción y Operarios</option>
                  <option value="Salud, Medicina, Farmacia y Bioquímica">Salud, Medicina, Farmacia y Bioquímica</option>
                  <option value="Secretaría y Recepción">Secretaría y Recepción</option>
                  <option value="Seguridad y Vigilancia">Seguridad y Vigilancia</option>
                  <option value="Tecnología y Sistemas">Tecnología y Sistemas</option>
                  <option value="Textil">Textil</option>
                  <option value="Ventas">Ventas</option>
                  <option value="Otros">Otros</option>
                </select>
              </div>
            </div>
          </div>

        </div>

        <div class="owl-carousel vegetable-carousel justify-content-center">
          <div v-for="ofe in ofertasFiltradas.slice(0, 10)" :key="ofe.id"
            class="border border-primary rounded position-relative vesitable-item">

            <div class="text-white bg-primary px-3 py-1 rounded position-absolute" style="top: 10px; right: 10px;">
              Ofertas
              Recientes</div>
            <div class="p-4 rounded-bottom">
              <h4>{{ ofe.titulo }}</h4>
              <h6>Fecha de publicación: {{ new Date(ofe.created_at).toLocaleDateString('es-ES') }}</h6>
              <h6>Categoría / Área: {{ ofe.categoria }}</h6>
              <p class="text-dark">Descripcion: {{ofe.descripcion}}</p>
              <div class="d-flex justify-content-between flex-lg-wrap">
                <p class="text-dark fs-5 fw-bold mb-0">Nombre de la Empresa: {{ ofe.Empresa }}</p>
                <router-link :to="{path:'/postularse/'+idus+'/'+ofe.id}"
                  class="btn border border-secondary rounded-pill px-3 text-primary"><i
                    class="fa-solid fa-eye me-2 text-primary"></i> Ver Detalle</router-link>
              </div>
            </div>

          </div>
        </div>
      </form>
      <br><br>
    </div>
  </div>

</template>
<style>
@import url('@/assets/styles/styles.css');
</style>

<script>
import customscript from '@/assets/scripts/custom.js';
import axios from 'axios';
import { useRoute } from 'vue-router';

export default {
  data() {
    return {
      idus: 0,
      url255: 'http://backendbolsaempleo.test/api/b_e/vin/consultanopostofert',
      ofertas: [],
      categoriaSeleccionada: '',
      cargando: false,
    }
  },
  mounted() {
    const ruta = useRoute();
    this.idus = ruta.params.id;
    this.getOFertas();
  },
  computed: {
    // Filtrar ofertas por categoría
    ofertasFiltradas() {
      if (this.categoriaSeleccionada === '') {
        // Si no hay categoría seleccionada, mostrar todas las ofertas
        return this.ofertas;
      } else {
        // Si hay una categoría seleccionada, filtrar las ofertas
        return this.ofertas.filter(oferta => oferta.categoria === this.categoriaSeleccionada);
      }
    }
  },
  methods: {
    getOFertas() {
      this.cargando = true;
      axios.get(this.url255, {
        params: { user_id: this.idus } // Enviar el id del usuario al backend
      }).then(
        res => {
          this.ofertas = res.data.sort((a, b) => new Date(b.created_at) - new Date(a.created_at));
          this.cargando = false;
        }
      );
    },


  },
  mixins: [customscript],
}
</script>
